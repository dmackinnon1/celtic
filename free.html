
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<title>Celtic Knots</title>
</head>
<style>
.framed {
	text-align: center;	
}
.centered {
	text-align: center;
}
</style>
<script src="js/bldrs.js"></script>
<script src="js/celtic.js"></script>
<script>
$(document).ready(function(){
	$("#show").on("click", function(event){
		interactive.mode = 'show';
		$("#show").addClass('btn-primary');
		$("#show").removeClass('btn-secondary');
		$("#edit").removeClass('btn-primary');
		$("#edit").addClass('btn-secondary');
		refreshInteractive();
	});	
	$("#edit").on("click", function(event){
		interactive.mode = 'edit';
		$("#edit").addClass('btn-primary');
		$("#edit").removeClass('btn-secondary');
		$("#show").removeClass('btn-primary');
		$("#show").addClass('btn-secondary');
		refreshInteractive();
	});
	$("#download").on("click", function(event){
		let tempElement = document.createElement('a');
  		tempElement.setAttribute('href', 'data:text/plain;charset=utf-8,' 
  			+ encodeURIComponent(""+ interactive.knot.init().junctions().nodes().lines().build()+""));
  		tempElement.setAttribute('download', 'image.svg');
  		tempElement.style.display = 'none';
  		document.body.appendChild(tempElement);
		tempElement.click();
		document.body.removeChild(tempElement);
	});
	
	$("#xs-size").on("click", function(event){
		$(".gs-btn").removeClass('btn-primary');
		$(".gs-btn").addClass('btn-secondary');	
		$("#xs-size").addClass('btn-primary');
		$("#xs-size").removeClass('btn-secondary');
		size = xsmall;
		reset();
	});	
	
	$("#sm-size").on("click", function(event){
		$(".gs-btn").removeClass('btn-primary');
		$(".gs-btn").addClass('btn-secondary');	
		$("#sm-size").addClass('btn-primary');
		$("#sm-size").removeClass('btn-secondary');
		size = small;
		reset();
	});	
	
	$("#md-size").on("click", function(event){
		$(".gs-btn").removeClass('btn-primary');
		$(".gs-btn").addClass('btn-secondary');		
		$("#md-size").addClass('btn-primary');
		$("#md-size").removeClass('btn-secondary');
		size = medium;
		reset();
	});	
	$("#lg-size").on("click", function(event){
		$(".gs-btn").removeClass('btn-primary');
		$(".gs-btn").addClass('btn-secondary');	
		$("#lg-size").addClass('btn-primary');
		$("#lg-size").removeClass('btn-secondary');
		size = large;
		reset();
	});	
	
	$("#reset").on("click", function(event){
		reset();
	});		

	$("#width").on('input change',function(e){
		reset();
	});

	$("#height").on('input change',function(e){
		reset();
	});

	$("#scale").on('input change',function(e){
		rescale();
	});

	$("#randomize").on("click", function(event){
		randomize();
	});

	interactive.display = document.getElementById('knot');
	reset();
});

function reset(){
	let width = parseInt($('#width').val());
	let height = parseInt($('#height').val());
	let scale = parseInt($('#scale').val());
	
	let grid = new Grid(height,width);
	grid.initialize().borders();
	
	let fg = "white";
	let bg = "black";
	if (interactive.knot != null){
		fg = interactive.knot.foregroundColor;
		bg = interactive.knot.backgroundColor
	} 
	interactive.knot = new EditKnotSVG(grid, scale);
	interactive.knot.setForeground(fg);
	interactive.knot.setBackground(bg);
	interactive.mode='show';
	resetButtons();
	applyStyle();
	refreshInteractive();
};

function rescale(){
	let scale = parseInt($('#scale').val());
	let newKnot = new EditKnotSVG(interactive.knot.g, scale);
	newKnot.setForeground(interactive.knot.foregroundColor);
	newKnot.setBackground(interactive.knot.backgroundColor);
	interactive.knot = newKnot;
	refreshInteractive();
}

function resetButtons(){
	$("#show").addClass('btn-primary');
	$("#show").removeClass('btn-secondary');
	$("#edit").removeClass('btn-primary');
	$("#edit").addClass('btn-secondary');	
}
function foreground(c='white'){
	interactive.knot.setForeground(c);
	refreshInteractive();
}
function background(c='black'){
	interactive.knot.setBackground(c);
	refreshInteractive();
}

function randomize(){
	if (interactive.knot != null) {
		interactive.knot.g.randomLines(20);
		refreshInteractive();
	}
}
</script>
<body>

<nav class="navbar navbar-light bg-light" style="margin-bottom:0px">
			<a class="navbar-brand" href="..">
				<img src="imgs/github_badge1.png" width="40" height="40" >
				dmackinnon1.github.io</a>		
</nav>
<br>
<div class="container-fluid">
	<div class='row'>
	<div class='col-sm-1 col-lg-3'></div>
	<div class='col-sm-10 col-lg-6 main-column'>
		<div class="page-header">
			<h1>Celtic Knots
			</h1>
		</div> 	
		<button type='button' 
		class='btn btn-info' data-toggle='collapse' data-target='#mainText'>
		About </button>
		<div id='mainText' class='collapse'> <br>
			You can edit the woven pattern below to create interconnected celtic-style knots.
			Click the <strong>Edit</strong> button to show the primary (small) and secondary (larger) grid points. Connect two adjacent secondary points (non-diagonal) to form a knot boundary by clicking on one point and then another neighbouring point. If two non-adjacent points are selected, a rectangular boundary with the selected points as diagonal corners will be drawn,
			if possible. Click on the grey midpoint of a boundary to remove it. Click <strong>Show</strong> to reveal the knot pattern.
		</div>
		<hr>	
		<div class='centered'>
		<form>
			height: <input type="number" id="height" min="2" max="20" step="1" value="3">
			width: <input type="number" id="width" min="2" max="20" step="1" value="3">
			scale: <input type="number" id="scale" min="5" max="100" step="1" value="40">		 
		</form>
		</div>
		<br>
	</div>
	<div class='col-sm-1 col-lg-3'></div>
</div>

<div id='knot' class='framed'></div>

	<div class='row'>
	<div class='col-sm-1 col-lg-3'></div>
	<div class='col-sm-10 col-lg-6 main-column'>
		<br>
		<div class='centered'>
		<div class="btn-group btn-group-md" role="group">	
			<button id="show" class="btn btn-primary">Show</button>
			<button id="edit" class="btn btn-secondary">Edit</button>
			<button id="randomize" class="btn btn-secondary">Random</button>	
			<button id="reset" class="btn btn-secondary">Reset</button>
		</div>		
		<br>
		<br>
		<div class="btn-group">
		<div class="dropdown">
  			<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    		foreground
  			</button>
  			<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    			<a class="dropdown-item" onclick="foreground('black')" href="#">black</a>
    			<a class="dropdown-item" onclick="foreground('white')"href="#">white</a>
    			<a class="dropdown-item" onclick="foreground('darkgreen')"href="#">darkgreen</a>
    			<a class="dropdown-item" onclick="foreground('lightgreen')"href="#">lightgreen</a>
    			<a class="dropdown-item" onclick="foreground('steelblue')"href="#">steelblue</a>
    			<a class="dropdown-item" onclick="foreground('darkblue')"href="#">darkblue</a>
    			<a class="dropdown-item" onclick="foreground('lightblue')"href="#">lightblue</a>
    			<a class="dropdown-item" onclick="foreground('red')"href="#">red</a>
    			<a class="dropdown-item" onclick="foreground('pink')"href="#">pink</a>	
    			<a class="dropdown-item" onclick="foreground('orange')"href="#">orange</a>
    			<a class="dropdown-item" onclick="foreground('purple')"href="#">purple</a>
    			<a class="dropdown-item" onclick="foreground('orangered')"href="#">orangered</a>
  			</div>
  		</div>
  		<div class="dropdown">
  			 <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    		background
  			</button>
  			<div class="dropdown-menu" aria-labelledby="dropdownMenuButton2">
  				<a class="dropdown-item" onclick="background('black')" href="#">black</a>
    			<a class="dropdown-item" onclick="background('white')"href="#">white</a>
    			<a class="dropdown-item" onclick="background('darkgreen')"href="#">darkgreen</a>
    			<a class="dropdown-item" onclick="background('lightgreen')"href="#">lightgreen</a>
    			<a class="dropdown-item" onclick="background('steelblue')"href="#">steelblue</a>
    			<a class="dropdown-item" onclick="background('darkblue')"href="#">darkblue</a>
    			<a class="dropdown-item" onclick="background('lightblue')"href="#">lightblue</a>
    			<a class="dropdown-item" onclick="background('red')"href="#">red</a>
    			<a class="dropdown-item" onclick="background('pink')"href="#">pink</a>	
    			<a class="dropdown-item" onclick="background('orange')"href="#">orange</a>
    			<a class="dropdown-item" onclick="background('purple')"href="#">purple</a>
    			<a class="dropdown-item" onclick="background('orangered')"href="#">orangered</a>
  			</div>
		</div>
		</div>	
		</div>
		<hr>
		<div class='centered'>
		<div class="btn-group btn-group-md" role="group">	
			<button id="download" class="gs-btn btn btn-secondary">download</button>	
			</div>
		</div>
		<br>
		<br>	
		</div>
		<div class='col-sm-1 col-lg-3'></div>
	</div>
</div>
</body>
</html>